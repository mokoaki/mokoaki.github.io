## Thread

[Ruby技術者認定試験の書籍写経メモ]({% post_url 2017-07-22-ruby技術者認定試験の書籍写経メモ %})

- Procとも関連が強い
- マルチスレッドとかいうアレです
- 非常に奥が深い。基本的な動作が分かってればおｋ

- Threadクラスをインスタンス化すると新しいスレッドが生成される
- 生成した側のjoinメソッドにより、生成されたスレッドの終了を待つことができる

Threadクラスのコンストラクタにブロックを渡すとスレッドが生成される

```ruby
# 'thread start' と 'wait' は同時に進行しているスレッドにて出力される。どっちが先に出力されるかは誰も知らない
# スレッドを生成した側で t.joinし、生成したスレッドが終了するまで待機させている
t = Thread.new do
  p 'thread start'
  sleep 1
  p 'thread end'
end

p 'wait'
t.join
  ```

Threadクラスのstartメソッドでスレッドを生成する 引数も渡せてる formメソッドも同じ動作！のはず！

```ruby
threads = (1..3).map do |count|
  Thread.start(count) do |index|
    p "thread-#{index} start"
    sleep 1
    p "thread-#{index} end"
  end
end
p 'wait'
threads.each do |thread|
  thread.join
end
```

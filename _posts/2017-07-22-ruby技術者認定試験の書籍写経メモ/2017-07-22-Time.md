## Time

[Ruby技術者認定試験の書籍写経メモ]({% post_url 2017-07-22-ruby技術者認定試験の書籍写経メモ %})

全然関係ないけど、Railsでは Time.now とかは使っちゃアカンよ。Time.zone.now か Time.current を使うんじゃ

- 世界標準時の(UTC,GMT 1970/01/0100:00:00)からの経過秒数で保持されている
- タイムゾーンとして、UTCや地方時刻を指定できる
- 内部的に環境依存した時刻システムに依存している（負の時刻が許されるシステム、32.64bitの差等でエラーになる事も

### Timeオブジェクトの生成

| Time.new    |            |
| Time.now    |            |
| Time.at     |            |
| Time.mktime | Time.local |
| Time.gm     | Time.utc   |

#### Time.new Time.now メソッド

- 現在時刻のTimeオブジェクトを返す
- タイムゾーンはローカルタイムとなる　日本で実行しているなら +0900

```ruby
Time.now.class
=> Time

Time.now
=> 2017-02-22 00:00:00 +0900
```

#### Time.at メソッド

- 起算日からの経過秒数を引数で指定したTimeオブジェクトを返す
- 第2引数にマイクロ秒を指定することも可能
- タイムゾーンはローカルタイムとなる　日本で実行しているなら +0900

```ruby
Time.at(1234567890)
=> 2009-02-14 08:31:30 +0900

Time.at(1234567890, 1234567890)
=> 2009-02-14 08:52:04 +0900
```

#### Time.mktime Time.local メソッド

- 引数の数に応じて引数の意味が変わるメソッド
- 引数が7つ以下の場合(年, 月 = 1, 日 = 1, 時 = 0, 分 = 0, 秒 = 0, マイクロ秒 = 0) 月は'Jan'とかも指定可能
- 引数が10の場合(秒, 分, 時, 日, 月, 年, 曜日, 年日, 夏時間の真理値, タイムゾーン)
- タイムゾーンはローカルタイムとなる　日本で実行しているなら +0900

```ruby
Time.local(2017, 1, 1, 1, 1, 1, 0)
=> 2017-01-01 01:01:01 +0900
```

```ruby
Time.local(1, 1, 1, 1, 1, 2017, 0, 1, false, 'JST')
=> 2017-01-01 01:01:01 +0900
```

ちなみに time#to_a で引数が10のパターンの値が取得できる

```ruby
Time.local(2017, 1, 1, 1, 1, 1, 0).to_a
=> [1, 1, 1, 1, 1, 2017, 0, 1, false, "JST"]
```

#### Time.gm Time.utc メソッド

- 引数の数や順序は Time.mktime と同じ
- タイムゾーンはUTCとなる

```ruby
Time.utc(2017, 1, 1, 1, 1, 1, 0)
=> 2017-01-01 01:01:01 UTC
```

```ruby
Time.utc(1, 1, 1, 1, 1, 2017, 0, 1, false, 'JST')
=> 2017-01-01 01:01:01 UTC
```

### timeオブジェクトの属性

| time#year  |             | 年         |
| time#month | time#mon    | 月         |
| time#mday  | time#day    | 日         |
| time#hour  |             | 時         |
| time#min   |             | 分         |
| time#sec   |             | 秒         |
| time#usec  | time#tv_sec | マイクロ秒 |

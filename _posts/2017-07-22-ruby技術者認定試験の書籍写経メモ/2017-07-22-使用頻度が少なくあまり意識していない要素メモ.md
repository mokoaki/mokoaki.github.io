## 使用頻度が少なくあまり意識していない要素メモ

[Ruby技術者認定試験の書籍写経メモ]({% post_url 2017-07-22-ruby技術者認定試験の書籍写経メモ %})

### print, puts, p

| print | 複数の引数を取る | 改行しない       | to_s    | 戻り値はnil        |
| puts  | 複数の引数を取る | 引数毎に改行する | to_s    | 戻り値はnil        |
| p     | 複数の引数を取る | 引数毎に改行する | inspect | 戻り値は引数の配列 |

### require, load

- require
  - 何度実行しても一度しか実行しない
  - ファイルの拡張子などを補完する
  - 一般的にライブラリ読み込み用

- load
  - 実行された回数だけ実行しない
  - ファイルの拡張子などを補完しない
  - 一般的に設定情報読み込み用

- 上記の2つのファイルの探し方
  - 絶対パス指定
    - そのまんま読みに行く
  - 相対パス指定
    - $LOAD_PATH を順番に検索する
    - RUBYLIB を順番に検索する

### &&, and, ||, or

and, or は使わないよね　使わないからこそどういうもんだか理解してる？

```ruby
p 1 && 2
2
=> 2

p 1 and 2
1
=> 2

p nil || 2
2
=> 2

p nil or 2
nil
=> 2
```

### 桁数とかフォーマット

- Kernel.#sprintf
- Kernel.#format
- String#%

3つとも同じ動作ぽいね、エイリアスなのかどうかぐぐってみたけどよくわからなかったよ

とりあえず format 使っとけって感じだよ

```ruby
sprintf('result: %#b', 16) #=> "result: 0b10000"
sprintf('result: %#o', 16) #=> "result: 020"
sprintf('result: %#x', 16) #=> "result: 0x10"
sprintf('result: %#X', 16) #=> "result: 0X10"
sprintf('result: %2d', 1)   #=> "result:  1"
sprintf('result: %2d', 10)  #=> "result: 10"
sprintf('result: %02d', 1)  #=> "result: 01"
sprintf('result: %02d', 10) #=> "result: 10"
sprintf('result: %5.2f', 12.5)   #=> "result: 12.50"
sprintf('result: %5.2f', 12.56)  #=> "result: 12.56"
sprintf('result: %5.2f', 12.567) #=> "result: 12.57" # 繰り上がっている

format('result: %#b', 16) #=> "result: 0b10000"
format('result: %#o', 16) #=> "result: 020"
format('result: %#x', 16) #=> "result: 0x10"
format('result: %#X', 16) #=> "result: 0X10"
format('result: %2d', 1)   #=> "result:  1"
format('result: %2d', 10)  #=> "result: 10"
format('result: %02d', 1)  #=> "result: 01"
format('result: %02d', 10) #=> "result: 10"
format('result: %5.2f', 12.5)   #=> "result: 12.50"
format('result: %5.2f', 12.56)  #=> "result: 12.56"
format('result: %5.2f', 12.567) #=> "result: 12.57" # 繰り上がっている

'result: %#b' % 16 #=> "result: 0b10000"
'result: %#o' % 16 #=> "result: 020"
'result: %#x' % 16 #=> "result: 0x10"
'result: %#X' % 16 #=> "result: 0X10"
'result: %2d' % 1   #=> "result:  1"
'result: %2d' % 10  #=> "result: 10"
'result: %02d' % 1  #=> "result: 01"
'result: %02d' % 10 #=> "result: 10"
'result: %5.2f' % 12.5   #=> "result: 12.50"
'result: %5.2f' % 12.56  #=> "result: 12.56"
'result: %5.2f' % 12.567 #=> "result: 12.57" # 繰り上がっている
```

ちなみに文字列でもイケる

```ruby
sprintf('result: %5.2f', '12.567') #=> "result: 12.57"
format('result: %5.2f', '12.567')  #=> "result: 12.57"
'result: %5.2f' % '12.567'         #=> "result: 12.57"
```

### case式

```ruby
case 1
when 1
  p 'a'
end
"a"
=> "a"

case 1
when 1
  p 'a'
when 1
  p 'b' # こちらは実行されない
end
"a"
=> "a"

case 10
when 1
  p 'a'
else
  p 'b'
end
"b"
=> "b"

case 3
when 1, 2
  p 'a'
when 3, 4
  p 'b'
end
"b"
=> "b"

case 5
when 1..2, 5..6
  p 'a'
when 3..4
  p 'b'
end
"a"
=> "a"
```

### while式

条件を満たす間ループ

```ruby
while true
  p '無限ループ CTRL-C' ; sleep 0.1
end

# むりやり範囲使ったけどつまらない例だわ
count = 0
while (0..5) === count do
  p count
  count += 1
end

# 後置while 必ず一回は実行される、みんな知ってるね！
count = 0
begin
  p count
  count += 1
end while (0..5) === count

# while修飾子 ぶっちゃけ使わない
count = 0
p count += 1 while (0..5) === count
```

### until式

条件を満たすまでループ

```ruby
until false
  p '無限ループ CTRL-C' ; sleep 0.1
end

count = 0
until 5 == count do
  p count
  count += 1
end

# 後置until 必ず一回は実行される、みんな知ってるね！
count = 0
begin
  p count
  count += 1
end until 5 == count

# until修飾子 ぶっちゃけ使わない
count = 0
p count += 1 until 5 == count
```

### コマンドライン起動時のオプション

```sh
ruby [オプション] -- ファイル名 [ARGV]
```

#### -c 文法チェック

```sh
$ ruby -c temp1.rb
Syntax OK
```

#### -e ワンライナー

```sh
$ ruby -e "p 2 ** 10"
1024
```

#### -w0 -w1 -w2(w) 冗長出力モード　右ほど冗長

#### -I(アイ) $LOAD_PATH 追加

```sh
$ ruby -I./ temp1.rb
```

#### -r スクリプト実行前に指定されたファイル雨を実行する意味不明

```sh
$ ruby -r ./temp2.rb temp1.rb
```

#### -d デバックモード

### for

forはスコープを作らないので内外アクセスし放題

```ruby
moko = 1
for a in [1, 2, 3]
  p moko #=> 1
end
p moko #=> 1
for a in [1, 2, 3]
  moko = a
  homo = a
end
p moko #=> 3
p homo #=> 3
```

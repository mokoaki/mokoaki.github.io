## Fiber ファイバ

[Ruby技術者認定試験の書籍写経メモ]({% post_url 2017-07-22-ruby技術者認定試験の書籍写経メモ %})

- 1.9で追加された
- スレッドみたいな感じだが、並列処理の切り替えを指定できる、指定しなければならない
- Fiber.yield で止まって待っているので、#resumeメソッドで動け！と指定してあげる
- 非常に奥が深い。基本的な動作が分かってればおｋ

```ruby
f = Fiber.new do
  p '111'
  Fiber.yield(1) # この行により、元のスレッドに処理が移る 戻り値は1
  p '222'
  Fiber.yield(2) # この行により、元のスレッドに処理が移る 戻り値は2
  p '333'
  nil
end
# この時点で、ファイバは実行されていない
f.resume
"111"
=> 1
f.resume
"222"
=> 2
f.resume
"333"
=> nil # ファイバ終わった！
f.resume
FiberError: dead fiber called

f = Fiber.new do
  (1..3).each do |i|
    Fiber.yield(i) # この行により、元のスレッドに処理が移る 戻り値はi
  end
  nil
end
f.resume #=> 1
f.resume #=> 2
f.resume #=> 3
f.resume #=> nil # ファイバ終わった！
f.resume
FiberError: dead fiber called
```
